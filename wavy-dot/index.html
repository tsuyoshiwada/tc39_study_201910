<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"><meta name="theme-color" content="#3498db"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Wavy Dot - #tc39_study TC39 Proposals LT å¤§ä¼š</title><meta property="og:title" content="Wavy Dot - #tc39_study TC39 Proposals LT å¤§ä¼š"><meta property="og:type" content="article"><meta property="og:image" content="https://github.com/tsuyoshiwada/tc39_study_201910/raw/master/docs/images/ogp.jpg"><link href="vendor.6.5ad5f6b238180a494f21.css" rel="stylesheet"><link href="main.3.0295305ca86053c4e9a8.css" rel="stylesheet"></head><body><div id="root"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="btn-sidebar" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg><article id="webslides"><section class="aligncenter fullscreen title"><div class="wrap"><div class="content-left"><h1>Wavy Dot</h1><p class="text-intro">Syntactic Support for Promise Pipelining</p><ul class="description"><li><strong>Stage</strong>:<!-- --> 1</li><li><strong>Repository</strong>:<!-- --> <a href="https://github.com/tc39-transfer/proposal-wavy-dot" target="_blank" rel="noopener noreferrer">tc39-transfer/proposal-wavy-dot</a></li><li><strong>Date</strong>: 2019/10/09</li><li><strong>#tc39_study</strong>: TC39 Proposals LT å¤§ä¼š</li></ul></div></div></section><section class="aligncenter about"><div class="wrap"><div class="cta"><div class="number"><img src="https://avatars0.githubusercontent.com/u/5393238?s=460&amp;v=4" width="200" height="200"></div><div class="benefit"><p class="text-subtitle">About me</p><h3>ã‚ã ã¾ã‚‹ / tsuyoshiwada</h3><p class="text-intro">Web Developer (CyberAgent CATS).<br>GitHub:<!-- --> <a href="https://github.com/tsuyoshiwada" target="_blank" rel="noopener noreferrer">tsuyoshiwada</a>, Twitter:<!-- --> <a href="https://twitter.com/wadackel" target="_blank" rel="noopener noreferrer">@wadackel</a></p></div></div></div></section><section class="aligncenter current"><h2>Wavy Dot ã¨ã¯ ?</h2><p>Pleasant Notation for Promise Pipelining<br><!-- -->Promise Pipelining ã«å¯¾ã™ã‚‹ç³–è¡£æ§‹æ–‡ã®æä¾›</p></section><section class="aligncenter"><h2>Promise Pipelining ğŸ¤” ?</h2></section><section class="aligncenter"><p><em>ã‚„ã‚„ä¸»é¡Œã‹ã‚‰å¤–ã‚Œã‚‹ãŸã‚ã–ã£ãã‚Šã¨...</em></p><p>ãƒªãƒ¢ãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã™ã‚‹æ“ä½œã®å‘¼ã³å‡ºã—ã‚’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³åŒ–ã™ã‚‹ã“ã¨ãŒç›®çš„ã€‚</p><p><code>Promise</code> ã®ã¿ä½¿ã†å ´åˆã¨ç•°ãªã‚Šã€éåŒæœŸã§å—ã‘å–ã‚‹å€¤ãŒè¿”ã£ã¦ãã‚‹å‰ã«ã€<br><!-- -->è¨ˆç®—æ¸ˆã¿ (Handled) ã®å€¤ã‚’å¾—ã‚‹ã“ã¨ãŒã§ããŸã‚Šã—ã¾ã™ã€‚<br><!-- -->(éåŒæœŸã®å®Œäº†å€¤ã‚’å®Ÿéš›ã«å—ã‘å–ã‚ã†ã¨ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§åˆã‚ã¦é…å»¶ãŒç™ºç”Ÿã™ã‚‹)</p></section><section class="aligncenter"><h2>proposal-eventual-send</h2><p>åˆ¥é€”ä»•æ§˜ã®ææ¡ˆãŒä»¥ä¸‹ã«ä¸ŠãŒã£ã¦ã„ã‚‹ã‚‚ã®ã¨ãªã‚Šã¾ã™ã€‚</p><p><a href="https://github.com/tc39-transfer/proposal-eventual-send">tc39-transfer/proposal-eventual-send</a></p></section><section class="aligncenter"><h2><code>HandledPromise</code> ã®æ¦‚è¦</h2><p>å®Ÿéš›ã« Promise Pipelining ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«<br><code>HandledPromise</code> ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚</p></section><section class="aligncenter"><p>ã¾ãšæ³¨ç›®ã™ã‚‹ã®ã¯ <code>HandledPromise</code> ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒæŒã¤ Static Methodã€‚<br><!-- -->ä»•æ§˜ã«ä¸ŠãŒã£ã¦ã„ã‚‹ Static Method ã¨ãã‚Œã‚‰ãŒã©ã®ã‚ˆã†ãªæŒ™å‹•ã‚’å–ã‚‹ã‹ã®ä¸€è¦§ã§ã™ã€‚</p></section><section class="aligncenter"><pre><code class="language-javascript">HandledPromise.get(p, prop);
// -&gt; p.then(t =&gt; t[prop])

HandledPromise.has(p, prop);
// -&gt; p.then(t =&gt; prop in t)

HandledPromise.set(p, prop, value);
// -&gt; p.then(t =&gt; (t[prop] = value))

HandledPromise.delete(p, prop);
// -&gt; p.then(t =&gt; delete t[prop])

HandledPromise.applyFunction(p, args);
// -&gt; p.then(t =&gt; t(...args))

HandledPromise.applyMethod(p, prop, args);
// -&gt; p.then(t =&gt; t[prop](...args))
</code></pre></section><section class="aligncenter"><p>åŸºæœ¬çš„ãªæ“ä½œã«åŠ ãˆã¦ã€éåŒæœŸå‡¦ç†ã®çµæœã‚’å¿…è¦ã¨ã—ãªã„å ´åˆã«<br><!-- -->ã‚³ã‚¹ãƒˆã‚’ä½æ¸›ã•ã›ã‚‹ãŸã‚ã® <code>SendOnly</code> ã¨ã„ã†<br><!-- -->ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚ææ¡ˆã«å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p><pre><code class="language-javascript">HandledPromise.getSendOnly(p, prop);
HandledPromise.hasSendOnly(p, prop);
HandledPromise.setSendOnly(p, prop, value);
HandledPromise.deleteSendOnly(p, prop);
HandledPromise.applyFunctionSendOnly(p, args);
HandledPromise.applyMethodSendOnly(p, prop, args);
</code></pre></section><section class="aligncenter"><p><code>HandledPromise</code> ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’åˆæœŸåŒ–ã—ãŸå ´åˆã€<br><code>Promise.prototype</code> ã¨åŒæ§˜ã®çµæœã‚’å—ã‘å–ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><p><code>HandledPromise.prototype</code> ã«å¯¾ã—ã¦ã¯<br><!-- -->Static Method ã¨åŒã˜ã‚ˆã†ã«<br><code>get</code>ã€<code>has</code> ãªã©ã® <strong>ãƒˆãƒ©ãƒƒãƒ—</strong> ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p></section><section class="aligncenter"><h2>æœ¬é¡Œ</h2><p>å†’é ­ã§ç´¹ä»‹ã—ãŸé€šã‚Šã€<br><!-- -->Wavy Dot ã¯ Promise Pipelining ã‚’å®Ÿç¾ã™ã‚‹ <a href="https://github.com/Agoric/proposal-eventual-send">proposal-eventual-send</a> (<code>HandledPromise</code>) ã‚’<br><!-- -->ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ã™ã‚‹ãŸã‚ã®æ§‹æ–‡ä»•æ§˜ã§ã™ã€‚</p></section><section class="aligncenter"><h2>æ§‹æ–‡</h2><p>Wavy Dot ã¯ <a href="https://tc39.es/proposal-optional-chaining/">Optional Chaining</a> ã‚„ <code>.</code> ã¨<br><!-- -->åŒã˜å„ªå…ˆé †ä½ã‚’æŒã¤ä¸­ç½®æ¼”ç®—å­ã§ <code>~.</code> ã¨è¡¨ç¾ã—ã¾ã™ã€‚</p><table><thead><tr><th align="left">æ§‹æ–‡</th><th align="left">å†…éƒ¨ãƒ¡ã‚½ãƒƒãƒ‰</th></tr></thead><tbody><tr><td align="left"><code>p ~. name</code></td><td align="left"><code>p.[[GetSend]](&#x27;name&#x27;)</code></td></tr><tr><td align="left"><code>p ~. name = value</code></td><td align="left"><code>p.[[SetSend]](&#x27;name&#x27;, value)</code></td></tr><tr><td align="left"><code>delete p ~. name</code></td><td align="left"><code>p.[[DeleteSend]](&#x27;name&#x27;)</code></td></tr><tr><td align="left"><code>p ~. (...args)</code></td><td align="left"><code>p.[[ApplySend]](args)</code></td></tr><tr><td align="left"><code>p ~. name(...args)</code></td><td align="left"><code>p.[[ApplyMethodSend]](&#x27;name&#x27;, args)</code></td></tr><tr><td align="left"><code>p ~. [prop]</code></td><td align="left"><code>p.[[GetSend]](prop)</code></td></tr><tr><td align="left"><code>p ~. [prop] = value</code></td><td align="left"><code>p.[[SetSend]](prop, value)</code></td></tr><tr><td align="left"><code>delete p ~. [prop]</code></td><td align="left"><code>p.[[DeleteSend]](prop)</code></td></tr><tr><td align="left"><code>p ~. [prop](...args)</code></td><td align="left"><code>p.[[ApplyMethodSend]](prop, args)</code></td></tr></tbody></table></section><section class="aligncenter"><p>å¼ã®å€¤ãŒæ˜ã‚‰ã‹ã«ç„¡è¦–ã•ã‚Œã‚‹æ§‹æ–‡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ãŠã„ã¦ã¯<br><!-- -->å†…éƒ¨ã§å„ãƒ¡ã‚½ãƒƒãƒ‰ã«å¯¾å¿œã—ãŸ <code>SendOnly</code> ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p></section><section class="aligncenter"><h2>Prototype</h2><p>ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ <a href="https://babeljs.io/repl/build/11698/#?babili=false&amp;browsers=&amp;build=&amp;builtIns=false&amp;spec=false&amp;loose=false&amp;code_lz=B4PwdADgFAngNAAgF6II4EoBQowG0CWAurIkljicueFFgGYDcmmd24EbeRnECAvAgBunAoX5DMAEwCmAG2kAXaQhwcZ8pSvCjmOTAgQcA9EYQA5APYIAhgFcFFgLbWF-AMYIAztMfuLsiwA7BHxA7wAnVyCwXQN9BCMAKgQ6CytE03ZME3MrOwdnVw9vXzd_IJCw6Uj8aMwgA&amp;debug=false&amp;forceAllTransforms=false&amp;shippedProposals=false&amp;circleciRepo=&amp;evaluate=false&amp;fileSize=false&amp;timeTravel=false&amp;sourceType=module&amp;lineWrap=true&amp;presets=es2015%2Creact%2Cstage-2&amp;prettier=false&amp;targets=&amp;version=7.6.2%2Bpr.10115&amp;externalPlugins=babel-plugin-syntax-eventual-send%407.6.2">Babel playground</a> ãŒåˆ†ã‹ã‚Šã‚„ã™ã‹ã£ãŸãŸã‚å¹¾ã¤ã‹æŠœç²‹ã€‚</p></section><section class="aligncenter"><pre><code class="language-javascript">x~.p
</code></pre><p>ğŸ‘‡</p><pre><code class="language-javascript">HandledPromise.get(x, &quot;p&quot;);
</code></pre></section><section class="aligncenter"><pre><code class="language-javascript">x~.p = v
</code></pre><p>ğŸ‘‡</p><pre><code class="language-javascript">HandledPromise.set(x, &quot;p&quot;, v);
</code></pre></section><section class="aligncenter"><pre><code class="language-javascript">delete x~.p
</code></pre><p>ğŸ‘‡</p><pre><code class="language-javascript">HandledPromise.delete(x, &quot;p&quot;);
</code></pre></section><section class="aligncenter"><pre><code class="language-javascript">x~.p(y, z, q)
</code></pre><p>ğŸ‘‡</p><pre><code class="language-javascript">HandledPromise.applyMethod(x, &quot;p&quot;, [y, z, q]);
</code></pre></section><section class="aligncenter"><pre><code class="language-javascript">x~.()
</code></pre><p>ğŸ‘‡</p><pre><code class="language-javascript">HandledPromise.apply(x, []);
</code></pre></section><section class="aligncenter"><h2>æ‰€æ„Ÿ</h2><ul><li>ä»•æ§˜å†…ã« TypeScript ã¨ã®ç«¶åˆã‚’é¿ã‘ã‚‹ãŸã‚ã®ä¸€æ–‡ãŒã‚ã‚‹</li><li>Wavy Dot è‡ªä½“ã®ä»•æ§˜ã«ã¤ã„ã¦ã®ç´¹ä»‹ã§ã¯ãªãã¦ã€ã»ã¨ã‚“ã©ãŒ <code>HandledPromise</code> ã®è©±ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸ</li><li><code>HandledPromise</code> ã®ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãª API ã‚’ä½¿ã£ã¦ã€ä¾¿åˆ©ã§é«˜é€Ÿãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ãŒå‡ºã¦ãã‚‹ã‚ˆã†ãªæ°—ãŒã—ã¦èƒ¸ã‚¢ãƒ„ã§ã—ãŸ</li></ul></section><section class="aligncenter"><h2>Related Proposal &amp; Discussion</h2><ul><li><a href="https://babeljs.io/repl/build/11698/#?babili=false&amp;browsers=&amp;build=&amp;builtIns=false&amp;spec=false&amp;loose=false&amp;code_lz=B4PwdADgFAngNAAgF6II4EoBQowG0CWAurIkljicueFFgGYDcmmd24EbeRnECAvAgBunAoX5DMAEwCmAG2kAXaQhwcZ8pSvCjmOTAgQcA9EYQA5APYIAhgFcFFgLbWF-AMYIAztMfuLsiwA7BHxA7wAnVyCwXQN9BCMAKgQ6CytE03ZME3MrOwdnVw9vXzd_IJCw6Uj8aMwgA&amp;debug=false&amp;forceAllTransforms=false&amp;shippedProposals=false&amp;circleciRepo=&amp;evaluate=false&amp;fileSize=false&amp;timeTravel=false&amp;sourceType=module&amp;lineWrap=true&amp;presets=es2015%2Creact%2Cstage-2&amp;prettier=false&amp;targets=&amp;version=7.6.2%2Bpr.10115&amp;externalPlugins=babel-plugin-syntax-eventual-send%407.6.2">Babel playground</a></li><li><a href="https://github.com/tc39-transfer/proposal-eventual-send">tc39-transfer/proposal-eventual-send: TC39 Eventual Send proposal</a></li><li><a href="https://www.youtube.com/watch?v=UXR0O-CufTk&amp;list=PLzDw4TTug5O0ywHrOz4VevVTYr6Kj_KtW">Eventual Send: JS Support for Promise Pipelining - YouTube</a></li></ul></section><section class="aligncenter title"><h1>Thank you ğŸ¶ !</h1></section></article></div><script type="text/javascript" src="runtime.2db2933dc188e629c868.bundle.js"></script><script type="text/javascript" src="vendor.6.5ad5f6b238180a494f21.bundle.js"></script><script type="text/javascript" src="main.3.0295305ca86053c4e9a8.bundle.js"></script></body></html>